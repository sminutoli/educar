package com.educar.game {	import flash.display.Loader;	import flash.events.Event;	import flash.net.URLRequest;	import flash.display.DisplayObject;	import flash.display.LoaderInfo;	import flash.events.ProgressEvent;	import flash.display.Sprite;	import flash.display.Stage;	import flash.net.URLLoader;	import fl.text.TLFTextField;	//import com.educar.sopa.Main;		public class GameLoader extends Sprite {				private var loader:Loader;		private var xmlLoader:URLLoader;		private var mainContent:DisplayObject;		private var theStage:Stage;		private var introURL:String;		private var gameURL:String;				public function GameLoader() {						this.theStage = this.stage;			this.stage.removeChild(this);						this.loader = new Loader();			this.loader.contentLoaderInfo.addEventListener(Event.INIT, content_init );						this.theStage.addEventListener( GameEvent.GAME_REPLAY, load_game, false, 0, true );						this.xmlLoader = new URLLoader( new URLRequest('config.xml') );			this.xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);		}				private function xmlLoaded(e:Event):void {			var data:XML = new  XML( e.target.data );			this.introURL = data.intro;			this.gameURL = data.game;			if( this.introURL ) load_intro(null);			else load_game(null);		}				private function load_intro( e:Event ):void {			this.loader.unload();			this.loader.load( new URLRequest( this.introURL ) );		}		private function load_game( e:Event ):void {			this.loader.unload();			this.loader.load( new URLRequest( this.gameURL ) );		}				private function content_init( e:Event ):void {			trace( 'content_init!', e.type, e.currentTarget.content );			if( mainContent ){				this.theStage.removeChild( mainContent );			}			mainContent = (e.currentTarget as LoaderInfo).content;			this.theStage.addChild( mainContent );					}	}	}